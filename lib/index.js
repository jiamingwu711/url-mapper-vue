var t={d:(e,r)=>{for(var a in r)t.o(r,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:r[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};function r(t){const e={},r=new URLSearchParams(t.split("?")[1]);for(const[t,a]of r)e[t]=a;return e}function a(t){return!t&&0!==t||Array.isArray(t)&&!t.length}function n(t,e=0){return decodeURIComponent(t)===t||e>20?t:n(decodeURIComponent(t),++e)}function o(){const t=`${window.location.pathname}${window.location.hash}`;window.history.replaceState("","",t)}function s(t){const e=r(window.location.href),n=Object.assign({},e,t);Object.keys(n).forEach((t=>{if(a(n[t]));else if(n[t]||!1===n[t]){let e=n[t];/^http/.test(n[t])&&(e=encodeURIComponent(n[t])),function(t){try{return"object"==typeof t&&(JSON.parse(JSON.stringify(t)),!0)}catch(t){return!1}}(e)&&!Array.isArray(e)&&(e=JSON.stringify(e)),"boolean"==typeof e&&(e=String(e)),n[t]=e}})),function(t){const e=new URL(window.location.href);for(const[r,n]of Object.entries(t))a(n)?e.searchParams.delete(r):e.searchParams.set(r,n);history.pushState({},"",e)}(n)}function i(t){const e=r(window.location.href);Object.keys(t).forEach((r=>{let a=e[r];if(void 0===a)return;const{path:o,type:s}=t[r];"arrays|number"!==s.toLowerCase()&&(a=n(a));let i="",c=this;switch(s.toLowerCase()){case"number":a=Number(a);break;case"string":a=String(a);break;case"boolean":"true"===a?a=!0:"false"===a&&(a=!1);break;case"object":a=function(t){try{return t&&JSON.parse(t)}catch(t){return null}}(a);break;case"array|number":a=a.split(","),a=a.map((t=>Number(t)));break;case"arrays|array|number":a=Array.isArray(a)?a.map((t=>t.split(",").map((t=>Number(t))))):[a.split(",").map((t=>Number(t)))];break;case"array|string":a=a.split(","),a=a.map((t=>String(t)));break;case"arrays|array|string":a=Array.isArray(a)?a.map((t=>t.split(",").map((t=>String(t))))):[a.split(",").map((t=>String(t)))]}if(o){const t=o.split(".");i=t.pop(),t.forEach((t=>{c=this[t]}))}c[i]=a}))}function c(t,e,r){let a;return function(){const n=this,o=arguments,s=r&&!a;clearTimeout(a),a=setTimeout((function(){a=null,r||t.apply(n,o)}),e),s&&t.apply(n,o)}}t.d(e,{j:()=>h,z:()=>d});let l={},p=new Map;const u=c((function(t){i.call(t,{...l}),l={},p.get(t)&&t.$nextTick((()=>{p.get(t).forEach((e=>{"function"==typeof t[e]&&t[e]()})),p.set(t,[])}))}),100);let f={};const b=c((t=>{s.call(t,f),f={}}),100);function m(t,e){const r=p.get(t)||[];r.includes(e)||r.push(e),p.set(t,r)}const y={beforeMount(t,{value:e,instance:r,expression:a},n){if(!e)return;let{url:o,type:s,data:i,callback:c}=e;if(i||(i=e.value),!(o&&s&&i))throw Error("url data 配置出错，请检查");c&&m(r,c),Object.assign(l,{[o]:{path:i,type:s}}),u(r)},updated(t,{oldValue:e,instance:r,value:a},n){if(!a)return;const o=a.value,{url:s}=a,i=o.split(".");let c=r;i.forEach((t=>{c=c[t]}));const l={[s]:c};Object.assign(f,l),b(r)},bind(t,{value:e,expression:r},a){if(!e)return;let{url:n,type:o,data:s,callback:i}=e;if(e.data||(s=[...r.matchAll(/value:\s*(.*?)(\}|,)/gi)][0][1]),!(n&&o&&s))throw Error("url data 配置出错，请检查");i&&m(a.context,i),Object.assign(l,{[n]:{path:s,type:o}}),u(a.context)},componentUpdated(t,{oldValue:e,value:r},a){if(!r)return;const n=r.value;if(e.value===n)return;const{url:o}=r,s={[o]:n};Object.assign(f,s),b(a.context)}},h={install(t){t.directive("url-map",y)}},d={install:t=>{(function(t,e){let r=t.split(".").map(Number),a="3".split(".").map(Number);for(let t=0;t<r.length||t<a.length;t++){let e=r[t]||0,n=a[t]||0;if(e>n)return 1;if(e<n)return-1}return 0})(t.version)>=0?(t.config.globalProperties.$clearUrlParams=o,t.config.globalProperties.$setDataFromUrl=i,t.config.globalProperties.$setUrlParams=s):(t.prototype.$clearUrlParams=o,t.prototype.$setDataFromUrl=i,t.prototype.$setUrlParams=s)}};var g=e.j,w=e.z;export{g as UrlMapperDirective,w as UrlMapperPlugin};